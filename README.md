# Rakuzan

Rakuzan - это приложение, которое собирает, анализирует и хранит данные из социальных сетей (на данный момент ouTube и Reddit). Проект позволяет отслеживать трендовые видео, собирать посты пользователей Reddit и анализировать содержание с использованием современных методов обработки естественного языка.

## Функциональность

- **Сбор данных с YouTube**:
  - Получение информации о трендовых видео (исключая музыкальную категорию)
  - Извлечение информации о видео из конкретных каналов
  - Анализ статистики: количество просмотров, лайков, комментариев

- **Сбор данных с Reddit**:
  - Получение постов от конкретных пользователей
  - Анализ содержания постов
  - Подсчет лайков и комментариев

- **Классификация тем**:
  - Классификация контента с использованием предобученных трансформаторов (Sentence Transformers)
  - Определение тематики контента: технологии, наука, политика, экономика, культура, развлечения, образ жизни, здоровье, образование, отношения, искусство и юмор

- **Хранение данных**:
  - Интеграция с MWS Tables API для хранения собранных данных
  - Структурированное хранение информации о видео и постах

## Технологии

- **Python 3.x**
- **Flask** - веб-фреймворк
- **Google YouTube API** - для получения данных с YouTube
- **Reddit API** - для получения данных с Reddit
- **Sentence Transformers** - для анализа и классификации текста
- **Requests** - для HTTP-запросов
- **MWS Tables API** - для хранения данных

## Установка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/sxvxmx/rakuzan_web.git
   cd rakuzan
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Настройте переменные окружения в файле `.env`:
   ```env
   YOUTUBE_API_TOKEN=ваш_ключ_API_YouTube
   REDDIT_TARGET_USER=целевой_пользователь_Reddit
   YOUTUBE_TARGET_CHANNEL_ID=ID_целевого_канала_YouTube
   REDDIT_USER_AGENT=ваш_user_agent_Reddit
   MWS_API_TOKEN=ваш_токен_MWS_API
   SECRET_KEY=ваш_секретный_ключ
   ```

## Использование

1. Запустите приложение:
   ```bash
   python app.py
   ```

2. Приложение будет доступно по адресу: `http://0.0.0.0:8000`

### Доступные маршруты

- `GET /ping` - Проверка работоспособности приложения
- `GET /update_main` - Обновление данных Reddit пользователя
- `GET /update_youtube` - Обновление данных YouTube канала
- `GET /update_youtube_trending` - Обновление данных трендовых YouTube видео

## Структура проекта

```
rakuzan/
├── app.py                 # Основной Flask-приложение
├── config.py              # Конфигурация приложения
├── requirements.txt       # Зависимости Python
├── tables.py              # Функции для работы с MWS Tables API
├── services/              # Сервисы для работы с разными API
│   ├── reddit.py          # Модуль для работы с Reddit API
│   ├── youtube.py         # Модуль для работы с YouTube API
│   ├── youtube_trending.py # Модуль для получения трендовых видео
│   ├── text_handler.py    # Простой обработчик текста
│   └── text_handler_adv.py # Продвинутый обработчик текста с классификацией
└── .env                   # Файл с переменными окружения (не включен в репозиторий)
```

## Переменные окружения

- `YOUTUBE_API_TOKEN` - API-ключ для доступа к YouTube Data API
- `REDDIT_TARGET_USER` - Целевой пользователь Reddit для получения постов
- `YOUTUBE_TARGET_CHANNEL_ID` - ID целевого YouTube-канала
- `REDDIT_USER_AGENT` - User-Agent строка для запросов к Reddit API
- `MWS_API_TOKEN` - API-токен для доступа к MWS Tables

## Особенности реализации

- Анализ текста с использованием Sentence Transformers для определения тематики контента
- Автоматическая очистка текста от URL и других нежелательных элементов
- Обработка больших объемов данных с YouTube с использованием пагинации
- Обработка исключений и ошибок при работе с API
- Структурированное хранение данных в MWS Tables
